(this["webpackJsonpproject-budget-tracker"]=this["webpackJsonpproject-budget-tracker"]||[]).push([[0],{134:function(e,t,a){},315:function(e,t,a){},316:function(e,t,a){},317:function(e,t,a){},320:function(e,t,a){"use strict";a.r(t),a.d(t,"tabContext",(function(){return xe}));var n=a(16),r=a(4),c=a(17),o=a(33),s=a.n(o),i=a(48),j=a(6),l=a(0),d=a.n(l),u=a(40),b=a.n(u),p=a(49),h=a.n(p),O=a(57),m=a(20),x=a(370),g=a(371),f=a(372),v=a(367),y=a(373),S=a(361),D=a(368),C=a(374),w=a(375),k=a(369),N=a(376),E=a(377),M=a(378),B=a(364),F=a(162),I=a.n(F),T=a(84),P=a.n(T),_=a(85),A=a.n(_),R=a(161),q=a.n(R),V=a(360),Y=a(21),$=a.n(Y),J=(a(134),a(95),a(366)),K=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],L={Jan:"january",Feb:"february",Mar:"march",Apr:"april",May:"may",Jun:"june",Jul:"july",Aug:"august",Sep:"september",Oct:"october",Nov:"november",Dec:"december"},H=new Date,W=String(H.getDate()).padStart(2,"0"),z=String(H.getMonth()+1).padStart(2,"0"),U=H.getFullYear()+"-"+z+"-"+W,Z=function(e){var t=new Date(e);t.setFullYear(t.getFullYear()+1);var a=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()).padStart(2,"0");return t.getFullYear()+"-"+n+"-"+a},G=function(e){var t=new Date(e);t.setFullYear(t.getFullYear()-1);var a=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+2).padStart(2,"0");return t.getFullYear()+"-"+n+"-"+a},Q=a(1),X=function(e){var t=e.isOpen,a=e.closeModal,n=e.transactionType,o=e.setTransactionType,s=e.formTransactionData,i=e.setFormTransactionData,j=e.handleTransaction,l=e.showError,d=e.setShowError,u=e.caller,b=e.projectStartDate,p=e.projectEndDate,O=function(e){"transaction-amount"===e.target.name?"-"===e.target.value[0]?d(!0):(d(!1),i(Object(c.a)(Object(c.a)({},s),{},Object(r.a)({},e.target.name,e.target.value)))):"transaction-date"===e.target.name?i(Object(c.a)(Object(c.a)({},s),{},{"transaction-date":e.target.value})):i(Object(c.a)(Object(c.a)({},s),{},Object(r.a)({},e.target.name,e.target.value)))};return Object(Q.jsxs)(h.a,{isOpen:t,onRequestClose:a,closeTimeoutMS:200,className:"Modal",overlayClassName:"Overlay",ariaHideApp:!1,children:[Object(Q.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(Q.jsx)("center",{children:Object(Q.jsxs)("h1",{className:"project-h1",children:[u," a Transaction"]})}),Object(Q.jsx)("label",{htmlFor:"transaction-name",children:"Transaction Name: "}),Object(Q.jsx)("input",{type:"text",id:"transaction-name",name:"transaction-name",defaultValue:"Edit"===u?s["transaction-name"]:"",onChange:O,required:!0}),Object(Q.jsx)("label",{htmlFor:"transaction-date",children:"Transaction Date: "}),Object(Q.jsx)("input",{type:"date",id:"transaction-date",name:"transaction-date",defaultValue:"Edit"===u?s["transaction-date"]:U,min:b,max:U<p?U:p,onChange:O,onKeyDown:function(e){return e.preventDefault()},required:!0}),Object(Q.jsx)("label",{htmlFor:"transaction-type",children:"Type of Transaction: "}),Object(Q.jsxs)("select",{type:"text",id:"transaction-type",name:"transaction-type",value:"Edit"===u?s["transaction-type"]:n,onChange:function(e){o(e.target.value),O(e)},required:!0,children:[Object(Q.jsx)("option",{value:"Architect",children:"Architect"}),Object(Q.jsx)("option",{value:"DBA",children:"DBA"}),Object(Q.jsx)("option",{value:"Technical Lead",children:"Technical Lead"}),Object(Q.jsx)("option",{value:"Developer",children:"Developer"}),Object(Q.jsx)("option",{value:"Business Analyst",children:"Business Analyst"}),Object(Q.jsx)("option",{value:"Tester",children:"Tester"}),Object(Q.jsx)("option",{value:"Networking and Security",children:"Networking and Security"}),Object(Q.jsx)("option",{value:"Travel Expenses",children:"Travel Expenses"}),Object(Q.jsx)("option",{value:"Hardware Costs",children:"Hardware Costs"}),Object(Q.jsx)("option",{value:"Software Costs",children:"Software Costs"}),Object(Q.jsx)("option",{value:"Stationery",children:"Stationery"}),Object(Q.jsx)("option",{value:"Training",children:"Training"}),Object(Q.jsx)("option",{value:"Miscellaneous",children:"Miscellaneous"})]}),Object(Q.jsx)("label",{htmlFor:"transaction-amount",className:l?"labelError":"tempclass",children:"Transaction Amount:"}),Object(Q.jsx)("input",{type:"number",step:"any",id:"transaction-amount",name:"transaction-amount",defaultValue:"Edit"===u?Number.parseFloat(s["transaction-amount"]):"",onChange:O,className:l?"errorClass":"tempclass",required:!0}),l&&Object(Q.jsx)(J.a,{severity:"error",children:"Enter a positive value for amount!"}),Object(Q.jsxs)("center",{children:[Object(Q.jsx)("button",{type:"reset",value:"Reset",children:"Reset"}),Object(Q.jsx)("button",{type:"submit",onClick:j,id:"transaction-submit",disabled:l||"Add"===u&&(0===s["transaction-amount"]||""===s["transaction-name"]),children:"Submit"})]})]}),Object(Q.jsx)("button",{onClick:a,id:"closeButton",children:"\xd7"})]})};function ee(e,t,a){return"amount"===a?parseInt(t[a])<parseInt(e[a])?-1:parseInt(t[a])>parseInt(e[a])?1:0:t[a]<e[a]?-1:t[a]>e[a]?1:0}function te(e,t){return"desc"===e?function(e,a){return ee(e,a,t)}:function(e,a){return-ee(e,a,t)}}function ae(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}var ne=[{id:"serial",numeric:!1,disablePadding:!0,label:"S.No."},{id:"name",numeric:!0,disablePadding:!1,label:"Transaction Name"},{id:"amount",numeric:!0,disablePadding:!1,label:"Transaction Amount"},{id:"date",numeric:!0,disablePadding:!1,label:"Transaction Date"},{id:"type",numeric:!0,disablePadding:!1,label:"Transaction Type"}];function re(e){var t=e.order,a=e.orderBy,n=e.onRequestSort;return Object(Q.jsx)(x.a,{children:Object(Q.jsxs)(g.a,{children:[ne.map((function(e){return"serial"!==e.id?Object(Q.jsx)(f.a,{align:e.numeric?"center":"left",sortDirection:a===e.id&&t,children:Object(Q.jsxs)(v.a,{active:a===e.id,direction:a===e.id?t:"asc",onClick:(r=e.id,function(e){n(e,r)}),children:[e.label,a===e.id?Object(Q.jsx)(y.a,{component:"span",sx:V.a,children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id):Object(Q.jsx)(f.a,{sx:{fontFamily:"Manrope"},children:e.label},e.id);var r})),Object(Q.jsx)(f.a,{sx:{fontFamily:"Manrope",paddingLeft:3.5},children:"Options"})]})})}var ce=function(){var e=Object(l.useContext)(xe),t=e.settab,a=e.projectId,n=e.counter,r=Object(l.useState)(0),o=Object(j.a)(r,2),d=o[0],u=o[1],b=Object(l.useState)("asc"),p=Object(j.a)(b,2),h=p[0],O=p[1],m=Object(l.useState)("serial"),x=Object(j.a)(m,2),v=x[0],F=x[1],T=Object(l.useState)(0),_=Object(j.a)(T,2),R=_[0],V=_[1],Y=Object(l.useState)(5),J=Object(j.a)(Y,2),K=J[0],L=J[1],H=Object(l.useState)([]),W=Object(j.a)(H,2),z=W[0],Z=W[1],G=Object(l.useState)(),ee=Object(j.a)(G,2),ne=ee[0],ce=ee[1],oe=Object(l.useState)(),se=Object(j.a)(oe,2),ie=se[0],je=se[1],le=Object(l.useState)(null),de=Object(j.a)(le,2),ue=de[0],be=de[1],pe=Object(l.useState)("Architect"),he=Object(j.a)(pe,2),Oe=he[0],me=he[1],ge=Object(l.useState)({"transaction-name":"","transaction-type":"Architect","transaction-amount":0,"transaction-date":"",project_id:a}),fe=Object(j.a)(ge,2),ve=fe[0],ye=fe[1],Se=Object(l.useState)(!1),De=Object(j.a)(Se,2),Ce=De[0],we=De[1],ke=Object(l.useState)(!1),Ne=Object(j.a)(ke,2),Ee=Ne[0],Me=Ne[1];Object(l.useEffect)((function(){Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.get("https://project-budget-tracker.herokuapp.com/api/project/".concat(a,"/transactions"));case 2:t=e.sent,Z(t.data.transactions),ce(t.data.projectStartDate),je(t.data.projectEndDate);case 6:case"end":return e.stop()}}),e)})))()}),[a,n,d]);var Be=function(){we(!0),ye(Object(c.a)(Object(c.a)({},ve),{},{"transaction-date":U,project_id:a}))},Fe=function(){we(!1),Me(!1),ye({"transaction-name":"","transaction-type":"Architect","transaction-amount":0,"transaction-date":"",project_id:a})},Ie=Object(S.a)("(max-width: 600px)"),Te=R>0?Math.max(0,(1+R)*K-z.length):0;return Object(l.useEffect)((function(){t("tran")}),[t]),Object(Q.jsx)(y.a,{sx:{width:"100%",marginTop:"2.5%",display:"flex",justifyContent:"center"},children:Object(Q.jsx)(y.a,{sx:{width:"80%"},children:Object(Q.jsxs)(D.a,{sx:{width:"100%",mb:2},children:[Object(Q.jsxs)(C.a,{sx:{pl:{sm:2},pr:{xs:1,sm:1}},children:[Object(Q.jsx)(w.a,{sx:{flex:"1 1 100%"},variant:"h6",id:"tableTitle",component:"div",children:"Transaction Table"}),Object(Q.jsx)(X,{isOpen:Ce,closeModal:Fe,transactionType:Oe,setTransactionType:me,formTransactionData:ve,setFormTransactionData:ye,handleTransaction:function(e){if(e.preventDefault(),!Ee){var t="https://project-budget-tracker.herokuapp.com/api/projects/add-transaction/";"Edit"===ue?$.a.put(t,ve).catch((function(e){console.log(e)})):$.a.post(t,ve).catch((function(e){console.log(e)})),u(d+1),Fe()}},showError:Ee,setShowError:Me,caller:ue,projectStartDate:ne,projectEndDate:ie}),Object(Q.jsxs)(k.a,{sx:{borderRadius:0,color:"black"},onClick:function(){$.a.get("https://project-budget-tracker.herokuapp.com/api/project/".concat(a,"/download_csv/"),{responseType:"blob"}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download","".concat(a,"_transactions.csv")),document.body.appendChild(n),n.click()})).catch((function(e){console.log(e)}))},children:[Object(Q.jsx)(q.a,{sx:{opacity:"70%"}}),!Ie&&Object(Q.jsx)(w.a,{children:"Export CSV"})]}),Object(Q.jsxs)(k.a,{onClick:function(){Be(),be("Add")},sx:{borderRadius:0,color:"black"},children:[Object(Q.jsx)(I.a,{sx:{opacity:"70%"}}),!Ie&&Object(Q.jsx)(w.a,{children:"Add Transaction"})]})]}),Object(Q.jsx)(N.a,{children:Object(Q.jsxs)(E.a,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"medium",children:[Object(Q.jsx)(re,{order:h,orderBy:v,onRequestSort:function(e,t){O(v===t&&"asc"===h?"desc":"asc"),F(t)}}),Object(Q.jsxs)(M.a,{children:[ae(z,te(h,v)).slice(R*K,R*K+K).map((function(e,t){var n=new Date(e.date),r=n.getMonth()+1,c=(n.getDate()>=10?n.getDate():"0"+n.getDate())+"/"+(r>=10?r:"0"+r)+"/"+n.getFullYear();return Object(Q.jsxs)(g.a,{children:[Object(Q.jsx)(f.a,{children:R*K+t+1}),Object(Q.jsx)(f.a,{align:"center",sx:{paddingRight:5},children:e.name}),Object(Q.jsxs)(f.a,{align:"center",sx:{paddingRight:5},children:["$",(new Intl.NumberFormat).format(e.amount)]}),Object(Q.jsx)(f.a,{align:"center",sx:{paddingRight:5},children:c}),Object(Q.jsx)(f.a,{align:"center",sx:{paddingRight:5},children:e.type}),Object(Q.jsxs)(f.a,{children:[Object(Q.jsx)(k.a,{onClick:function(){Be(),be("Edit"),ye({"transaction-id":e.id,"transaction-name":e.name,"transaction-type":e.type,"transaction-amount":e.amount,"transaction-date":e.date,project_id:a})},children:Object(Q.jsx)(P.a,{sx:{opacity:"70%"}})}),Object(Q.jsx)(k.a,{onClick:function(){window.confirm("Are you sure you want to delete?")&&($.a.delete("https://project-budget-tracker.herokuapp.com/api/projects/add-transaction/",{data:{"transaction-id":e.id}}).catch((function(){console.error()})),u(d+1))},children:Object(Q.jsx)(A.a,{sx:{opacity:"70%"}})})]})]},t)})),Te>0&&Object(Q.jsx)(g.a,{style:{height:53*Te},children:Object(Q.jsx)(f.a,{colSpan:6})})]})]})}),Object(Q.jsx)(B.a,{rowsPerPageOptions:[5,10,25],component:"div",count:z.length,rowsPerPage:K,page:R,onPageChange:function(e,t){V(t)},onRowsPerPageChange:function(e){L(parseInt(e.target.value,10)),V(0)}})]})})})};function oe(e,t,a){return"budget"===a?parseInt(t[a])<parseInt(e[a])?-1:parseInt(t[a])>parseInt(e[a])?1:0:t[a]<e[a]?-1:t[a]>e[a]?1:0}function se(e,t){return"desc"===e?function(e,a){return oe(e,a,t)}:function(e,a){return-oe(e,a,t)}}function ie(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}var je=[{id:"id",numeric:!1,disablePadding:!0,label:"S.No."},{id:"name",numeric:!0,disablePadding:!1,label:"Project Name"},{id:"start_date",numeric:!0,disablePadding:!1,label:"Project Start Date"},{id:"end_date",numeric:!0,disablePadding:!1,label:"Project End Date"},{id:"manager",numeric:!0,disablePadding:!1,label:"Project Manager"},{id:"budget",numeric:!0,disablePadding:!1,label:"Project Budget"}];function le(e){var t=e.order,a=e.orderBy,n=e.onRequestSort;return Object(Q.jsx)(x.a,{children:Object(Q.jsxs)(g.a,{children:[je.map((function(e){return Object(Q.jsx)(f.a,{align:e.numeric?"center":"left",sortDirection:a===e.id&&t,children:Object(Q.jsxs)(v.a,{active:a===e.id,direction:a===e.id?t:"asc",onClick:(r=e.id,function(e){n(e,r)}),children:[e.label,a===e.id?Object(Q.jsx)(y.a,{component:"span",sx:V.a,children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id);var r})),Object(Q.jsx)(f.a,{sx:{fontFamily:"Manrope",paddingLeft:3.5},children:"Options"})]})})}var de=function(){var e=Object(l.useContext)(xe),t=e.settab,a=e.projectId,o=e.counter,d=e.setProjectId,u=e.setCounter,b=Object(l.useState)("asc"),p=Object(j.a)(b,2),O=p[0],m=p[1],x=Object(l.useState)("serial"),v=Object(j.a)(x,2),S=v[0],F=v[1],I=Object(l.useState)(0),T=Object(j.a)(I,2),_=T[0],R=T[1],q=Object(l.useState)(10),V=Object(j.a)(q,2),Y=V[0],H=V[1],W=Object(l.useState)([]),z=Object(j.a)(W,2),U=z[0],G=z[1],X=Object(l.useState)(!1),ee=Object(j.a)(X,2),te=ee[0],ae=ee[1],ne=Object(l.useState)(!1),re=Object(j.a)(ne,2),ce=re[0],oe=re[1],je=Object(l.useState)({}),de=Object(j.a)(je,2),ue=de[0],be=de[1],pe=Object(l.useState)(1),he=Object(j.a)(pe,2),Oe=he[0],me=he[1],ge=Object(l.useState)(Array(12).fill(!1)),fe=Object(j.a)(ge,2),ve=fe[0],ye=fe[1],Se=function(e){"projectBudget"!==e.target.name&&"projectStartDate"!==e.target.name&&"projectEndDate"!==e.target.name||be((function(e){return Object(c.a)(Object(c.a)({},e),{},{projectMonthlyBudgets:{}})})),"projectBudget"===e.target.name?/^[0-9]+$/.test(e.target.value)?(oe(!1),be((function(t){return Object(c.a)(Object(c.a)({},t),{},Object(r.a)({},e.target.name,e.target.value))}))):oe(!0):be((function(t){return Object(c.a)(Object(c.a)({},t),{},Object(r.a)({},e.target.name,e.target.value))}))},De=function(){ae(!1),oe(!1),me(1),ye(Array(12).fill(!1))},Ce=_>0?Math.max(0,(1+_)*Y-U.length):0,we=function(e){var t=new Date(e),a=t.getMonth()+1;return(t.getDate()>=10?t.getDate():"0"+t.getDate())+"/"+(a>=10?a:"0"+a)+"/"+t.getFullYear()};return Object(l.useEffect)((function(){t("proj")}),[t]),Object(l.useEffect)((function(){Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.get("https://project-budget-tracker.herokuapp.com/api/projects/");case 2:t=e.sent,G(t.data);case 4:case"end":return e.stop()}}),e)})))()}),[a,o]),Object(Q.jsx)(y.a,{sx:{width:"100%",marginTop:"2.5%",display:"flex",justifyContent:"center"},children:Object(Q.jsx)(y.a,{sx:{width:"80%"},children:Object(Q.jsxs)(D.a,{sx:{width:"100%",mb:2},children:[Object(Q.jsx)(C.a,{sx:{pl:{sm:2},pr:{xs:1,sm:1}},children:Object(Q.jsx)(w.a,{sx:{flex:"1 1 100%"},variant:"h6",id:"tableTitle",component:"div",children:"Projects Table"})}),Object(Q.jsxs)(h.a,{isOpen:te,onRequestClose:De,closeTimeoutMS:200,className:"Modal",overlayClassName:"Overlay",ariaHideApp:!1,children:[1===Oe?Object(Q.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(Q.jsx)("center",{children:Object(Q.jsx)("h1",{children:"Edit Project"})}),Object(Q.jsx)("label",{htmlFor:"projectName",children:"Project Name: "}),Object(Q.jsx)("input",{type:"text",id:"projectName",name:"projectName",defaultValue:ue.projectName,onChange:Se,required:!0}),Object(Q.jsx)("label",{htmlFor:"projectStartDate",children:"Start Date: "}),Object(Q.jsx)("input",{type:"date",id:"projectStartDate",name:"projectStartDate",defaultValue:ue.projectStartDate,onChange:Se,onKeyDown:function(e){return e.preventDefault()},required:!0}),Object(Q.jsx)("label",{htmlFor:"projectEndDate",children:"End Date: "}),Object(Q.jsx)("input",{type:"date",id:"projectEndDate",name:"projectEndDate",min:ue.projectStartDate,max:Z(ue.projectStartDate),defaultValue:ue.projectEndDate,onChange:Se,onKeyDown:function(e){return e.preventDefault()},required:!0}),Object(Q.jsx)("label",{htmlFor:"projectManager",children:"Project Manager: "}),Object(Q.jsx)("input",{type:"text",id:"projectManager",name:"projectManager",defaultValue:ue.projectManager,onChange:Se,required:!0}),Object(Q.jsxs)("label",{htmlFor:"projectBudget",className:ce?"labelError":"tempclass",children:["Project Budget:"," "]}),Object(Q.jsx)("input",{type:"number",step:"any",id:"projectBudget",name:"projectBudget",defaultValue:Number.parseFloat(ue.projectBudget),onChange:Se,className:ce?"errorClass":"tempclass",required:!0}),ce&&Object(Q.jsx)(J.a,{severity:"error",children:"Enter a positive value for amount!"}),Object(Q.jsx)("center",{children:Object(Q.jsx)("button",{className:"next",onClick:function(){return me(2)},disabled:ce||""===ue.projectBudget||isNaN(ue.projectBudget),children:"Next"})})]}):Object(Q.jsx)("form",{className:"form-step-2",onSubmit:function(e){e.preventDefault()},children:Object(Q.jsxs)("center",{children:[Object(Q.jsx)("h1",{children:"Remaining Budget:"}),Object(Q.jsxs)("h1",{children:["$",(new Intl.NumberFormat).format(Number.parseFloat(ue.projectBudget)-Object.values(ue.projectMonthlyBudgets).reduce((function(e,t){return(e||0)+(t||0)}),0))]}),Object(Q.jsx)("div",{className:"form-2",children:function(){var e=ue.projectStartDate,t=ue.projectEndDate,a=new Date(e),r=new Date(t),c=a.getMonth(),o=r.getMonth(),s=a.getFullYear();return(o-c>0?Object(n.a)(K.slice(c,o+1)):o===c&&s===r.getFullYear()?[K[c]]:[].concat(Object(n.a)(K.slice(c,12)),Object(n.a)(K.slice(0,o+1)))).map((function(e){var t=e+" '"+s.toString().substr(-2);return"Dec"===e&&(s+=1),t}))}().map((function(e,t){return Object(Q.jsxs)("div",{className:"month-inputs",children:[Object(Q.jsx)("label",{className:ve[t]?"labelError2":"month-class",htmlFor:e,children:e}),Object(Q.jsx)("input",{className:ve[t]?"errorClass2":"month-class",name:"month-input",type:"text",value:ue.projectMonthlyBudgets[L[e.slice(0,3)]]?Math.abs(ue.projectMonthlyBudgets[L[e.slice(0,3)]]):0,min:"0",onKeyDown:function(e){"Enter"===e.key&&e.preventDefault()},onChange:function(a){if(""===a.target.value&&(a.target.value=0),a.target.validity.badInput||!/^[0-9]\d*(\.\d+)?$/.test(a.target.value)){var n=ve;n[t]=!0,ye(n)}else{var r=ve;r[t]=!1,ye(r)}var o=Object(c.a)({},ue.projectMonthlyBudgets);o[L[e.slice(0,3)]]=parseFloat(a.target.value?a.target.value:0),be((function(){return Object(c.a)(Object(c.a)({},ue),{},{projectMonthlyBudgets:o})}))}})]},t)}))}),Object(Q.jsx)("button",{className:"back",onClick:function(){return me(1)},children:"Back"}),Object(Q.jsx)("button",{type:"submit",onClick:function(e){if(e.preventDefault(),!ce){$.a.put("https://project-budget-tracker.herokuapp.com/api/projects/modify-project/",ue).catch((function(e){console.log(e)})),u(o+1),De()}},id:"projectSubmit",disabled:!ve.every((function(e){return!1===e}))||Number.parseFloat(ue.projectBudget)-Object.values(ue.projectMonthlyBudgets).reduce((function(e,t){return(e||0)+(t||0)}),0)!==0,children:"Submit"})]})}),Object(Q.jsx)("button",{onClick:De,id:"closeButton",children:"\xd7"})]}),Object(Q.jsx)(N.a,{children:Object(Q.jsxs)(E.a,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"medium",children:[Object(Q.jsx)(le,{order:O,orderBy:S,onRequestSort:function(e,t){m(S===t&&"asc"===O?"desc":"asc"),F(t)}}),Object(Q.jsxs)(M.a,{children:[ie(U,se(O,S)).slice(_*Y,_*Y+Y).map((function(e,t){return Object(Q.jsxs)(g.a,{children:[Object(Q.jsx)(f.a,{component:"th",scope:"row",children:_*Y+t+1}),Object(Q.jsx)(f.a,{align:"center",sx:{paddingRight:5},children:e.name}),Object(Q.jsx)(f.a,{align:"center",sx:{paddingRight:5},children:we(e.start_date)}),Object(Q.jsx)(f.a,{align:"center",sx:{paddingRight:5},children:we(e.end_date)}),Object(Q.jsx)(f.a,{align:"center",sx:{paddingRight:5},children:e.manager}),Object(Q.jsxs)(f.a,{align:"center",sx:{paddingRight:5},children:["$",(new Intl.NumberFormat).format(e.budget)]}),Object(Q.jsxs)(f.a,{children:[Object(Q.jsx)(k.a,{onClick:function(){ae(!0),be(Object(c.a)(Object(c.a)({},ue),{},{project_id:a})),be({id:e.id,projectName:e.name,projectStartDate:e.start_date,projectEndDate:e.end_date,projectManager:e.manager,projectBudget:e.budget,projectMonthlyBudgets:e.monthly_budget})},children:Object(Q.jsx)(P.a,{sx:{opacity:"70%"}})}),Object(Q.jsx)(k.a,{onClick:function(){window.confirm("Are you sure you want to delete?")&&$.a.delete("https://project-budget-tracker.herokuapp.com/api/projects/modify-project/",{data:{id:e.id}}).then(Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.get("https://project-budget-tracker.herokuapp.com/api/projects/");case 2:t=e.sent,G(t.data),d(U[0].id);case 5:case"end":return e.stop()}}),e)})))).catch((function(){console.error()}))},children:Object(Q.jsx)(A.a,{sx:{opacity:"70%"}})})]})]},t)})),Ce>0&&Object(Q.jsx)(g.a,{style:{height:53*Ce},children:Object(Q.jsx)(f.a,{colSpan:6})})]})]})}),Object(Q.jsx)(B.a,{rowsPerPageOptions:[5,10,25],component:"div",count:U.length,rowsPerPage:Y,page:_,onPageChange:function(e,t){R(t)},onRowsPerPageChange:function(e){H(parseInt(e.target.value,10)),R(0)}})]})})})},ue=a(86),be=(a(315),a(379)),pe=a(380),he=a(381),Oe=function(){var e=Object(l.useContext)(xe),t=e.settab,a=e.projectId,r=Object(l.useState)({}),c=Object(j.a)(r,2),o=c[0],s=c[1],i=Object(l.useState)([]),d=Object(j.a)(i,2),u=d[0],b=d[1],p=Object(l.useState)([]),h=Object(j.a)(p,2),O=h[0],m=h[1],x=Object(l.useState)(0),g=Object(j.a)(x,2),f=g[0],v=g[1];return Object(l.useEffect)((function(){!function(){var e=[],t=[],n={expenses:{}},r="https://project-budget-tracker.herokuapp.com/api/project/".concat(a,"/");$.a.get(r).then((function(a){n=a.data,s(n),b([]),m([]),Object.keys(n.expenses).map((function(a){return 0!==n.expenses[a]&&(e.push(a),t.push(n.expenses[a])),null})),b(e),m(t),v(1)})).catch((function(e){console.log(e.response.status),500===e.response.status?v(2):v(0)}))}()}),[a]),Object(l.useEffect)((function(){t("dash")}),[t]),Object(Q.jsxs)(Q.Fragment,{children:[0===f&&Object(Q.jsx)("div",{style:{height:"70vh",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(Q.jsx)(be.a,{})}),1===f&&Object(Q.jsxs)("div",{id:"dash",children:[Object(Q.jsxs)("div",{id:"left",children:[Object(Q.jsx)(pe.a,{variant:"outlined",sx:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:2},children:Object(Q.jsxs)(he.a,{sx:{display:"grid",placeItems:"center"},children:[Object(Q.jsx)("h2",{id:"totaltext",children:"Total Budget"}),Object(Q.jsxs)("h1",{id:"totalamt",children:["$",(new Intl.NumberFormat).format(o.budget)]}),Object(Q.jsx)("h2",{id:"inctext",children:"Incurred Expenses"}),Object(Q.jsxs)("h1",{id:"incamt",children:["$",(new Intl.NumberFormat).format(o.incurred_expenses)]})]})}),Object(Q.jsx)(pe.a,{variant:"outlined",sx:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:2},children:Object(Q.jsxs)(he.a,{sx:{display:"grid",placeItems:"center"},children:[Object(Q.jsxs)("h1",{id:o.monthly_budget_sum-o.incurred_expenses<0?"erroramt":"cvamt",children:["$",(new Intl.NumberFormat).format(Math.round(o.monthly_budget_sum-o.incurred_expenses))]}),Object(Q.jsx)("h2",{id:"cvtext",children:"Cost Variance"})]})}),Object(Q.jsx)(pe.a,{variant:"outlined",sx:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:2},children:Object(Q.jsxs)(he.a,{sx:{display:"grid",placeItems:"center"},children:[Object(Q.jsx)("h1",{id:o.monthly_budget_sum/o.incurred_expenses<1?"erroramt":"cpiamt",children:(o.monthly_budget_sum/o.incurred_expenses).toFixed(2)}),Object(Q.jsx)("h2",{id:"cpitext",children:"Cost Performance Index"})]})}),Object(Q.jsx)(pe.a,{variant:"outlined",sx:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:2},children:Object(Q.jsxs)(he.a,{sx:{display:"grid",placeItems:"center"},children:[Object(Q.jsxs)("h1",{id:"percentamt",children:[(o.incurred_expenses/o.budget*100).toFixed(2),"%"]}),Object(Q.jsx)("h2",{id:"percenttext",children:"spent"})]})}),Object(Q.jsx)(pe.a,{variant:"outlined",sx:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:2},children:Object(Q.jsxs)(he.a,{sx:{display:"grid",placeItems:"center"},children:[Object(Q.jsxs)("h1",{id:"eacamt",children:["$",(new Intl.NumberFormat).format(Math.round(o.budget/(o.monthly_budget_sum/o.incurred_expenses)))]}),Object(Q.jsx)("h2",{id:"eactext",children:"Estimate at Completion"})]})}),Object(Q.jsx)(pe.a,{variant:"outlined",sx:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:2},children:Object(Q.jsxs)(he.a,{sx:{display:"grid",placeItems:"center"},children:[Object(Q.jsxs)("h1",{id:o.budget-o.budget/(o.monthly_budget_sum/o.incurred_expenses)<0?"erroramt":"vacamt",children:["$",(new Intl.NumberFormat).format(Math.round(o.budget-o.budget/(o.monthly_budget_sum/o.incurred_expenses)))]}),Object(Q.jsx)("h2",{id:"vactext",children:"Variance at Completion"})]})})]}),Object(Q.jsx)("div",{id:"right",children:o.incurred_expenses?Object(Q.jsx)(ue.b,{id:"donut",data:{labels:Object(n.a)(u),datasets:[{data:Object(n.a)(O),fill:!0,backgroundColor:["rgb(255, 99, 132)","rgb(54, 162, 235)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(255, 159, 64)","rgb(153, 102, 255)","rgb(201, 203, 2)"]}]}}):Object(Q.jsx)("p",{className:"no-data",children:"Add transactions to render the graph."})})]}),2===f&&Object(Q.jsx)("div",{children:Object(Q.jsx)("center",{children:Object(Q.jsx)("h1",{children:"Add a project to get started."})})})]})},me=(a(316),function(){var e=Object(l.useState)([]),t=Object(j.a)(e,2),a=t[0],n=t[1],r=Object(l.useState)([]),c=Object(j.a)(r,2),o=c[0],s=c[1],i=Object(l.useState)([]),d=Object(j.a)(i,2),u=d[0],b=d[1],p=Object(l.useState)(!0),h=Object(j.a)(p,2),O=h[0],m=h[1],x=Object(l.useContext)(xe),g=x.settab,f=x.projectId;Object(l.useEffect)((function(){g("repo"),$.a.get("https://project-budget-tracker.herokuapp.com/api/project/".concat(f,"/report/")).then((function(e){var t=e.data.expenses;n(t),t=e.data.monthly_budgets,s(t),t=e.data.labels,b(t),m(!1)})).catch((function(e){console.log(e)}))}),[g,f]);var v={labels:u,datasets:[{label:"Actual Cost",backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgb(255, 99, 132)",data:a,borderWidth:1},{label:"Planned Value",backgroundColor:"rgba(54, 162, 235, 0.2)",borderColor:"rgb(54, 162, 235)",data:o,borderWidth:1}]};return Object(Q.jsx)(Q.Fragment,{children:O?Object(Q.jsx)("div",{style:{height:"70vh",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(Q.jsx)(be.a,{})}):Object(Q.jsx)("div",{id:"outside",children:Object(Q.jsxs)("div",{id:"bar",children:[Object(Q.jsx)(ue.a,{data:v,options:{scales:{x:{beginAtZero:!0},y:{beginAtZero:!0}}}}),Object(Q.jsx)("h1",{children:"Monthly Expenses Summary"})]})})})});a(317);h.a.setAppElement("#root");var xe=d.a.createContext(),ge=function(){var e=Object(l.useState)("dash"),t=Object(j.a)(e,2),a=t[0],o=t[1],d=Object(l.useState)(!1),u=Object(j.a)(d,2),b=u[0],p=u[1],x=Object(l.useState)(1),g=Object(j.a)(x,2),f=g[0],v=g[1],y=Object(l.useState)(0),S=Object(j.a)(y,2),D=S[0],C=S[1],w=Object(l.useState)({}),k=Object(j.a)(w,2),N=k[0],E=k[1],M=Object(l.useState)(!1),B=Object(j.a)(M,2),F=B[0],I=B[1],T=Object(l.useState)(Array(12).fill(!1)),P=Object(j.a)(T,2),_=P[0],A=P[1],R=Object(l.useState)(1),q=Object(j.a)(R,2),V=q[0],Y=q[1],H=Object(l.useState)({}),W=Object(j.a)(H,2),z=W[0],U=W[1],X=Object(l.useState)({projectName:"",projectStartDate:"",projectEndDate:"",projectManager:"",projectBudget:0,projectMonthlyBudgets:z}),ee=Object(j.a)(X,2),te=ee[0],ae=ee[1];Object(l.useEffect)((function(){Object(i.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://project-budget-tracker.herokuapp.com/api/projects/names/",e.next=3,$.a.get("https://project-budget-tracker.herokuapp.com/api/projects/names/");case 3:t=e.sent,a=t.data,E(a),(n=localStorage.getItem("projectId"))&&v(n);case 8:case"end":return e.stop()}}),e)})))()}),[D]);var ne={textDecoration:"none",color:"white"},re={textDecoration:"none",color:"white",fontWeight:"bold",borderBottom:"1px solid white",paddingBottom:"3px"},oe=function(){p(!1),I(!1),A(Array(12).fill(!1)),Y(1),U({}),ae({projectName:"",projectStartDate:"",projectEndDate:"",projectManager:"",projectBudget:0,projectMonthlyBudgets:z})},se=function(e){"projectBudget"!==e.target.name&&"projectStartDate"!==e.target.name&&"projectEndDate"!==e.target.name||(ae((function(e){return Object(c.a)(Object(c.a)({},e),{},{projectMonthlyBudgets:{}})})),U({})),"projectBudget"===e.target.name&&(/^[0-9]+$/.test(e.target.value)?I(!1):I(!0)),ae(Object(c.a)(Object(c.a)({},te),{},Object(r.a)({},e.target.name,e.target.value)))},ie=te.projectBudget-Object.values(z).reduce((function(e,t){return(e||0)+(t||0)}),0);return Object(Q.jsxs)(O.a,{children:[Object(Q.jsx)("div",{id:"navbar",children:Object(Q.jsxs)("div",{id:"navleft",children:[Object(Q.jsx)("h6",{children:"Project Budget Tracker"}),Object(Q.jsx)(O.b,{to:"/",style:"dash"===a?re:ne,children:"Dashboard"}),Object(Q.jsx)(O.b,{to:"/transactions",style:"tran"===a?re:ne,onClick:function(){return o("tran")},children:"Transactions"}),Object(Q.jsx)(O.b,{to:"/reports",style:"repo"===a?re:ne,children:"Reports"}),Object(Q.jsx)(O.b,{to:"/projects",style:"proj"===a?re:ne,onClick:function(){return o("proj")},children:"Projects"})]})}),Object(Q.jsxs)(h.a,{isOpen:b,onRequestClose:oe,closeTimeoutMS:200,className:"Modal",overlayClassName:"Overlay",ariaHideApp:!1,children:[1===V?Object(Q.jsxs)("form",{className:"form-step-1",onSubmit:function(e){e.preventDefault()},children:[Object(Q.jsx)("center",{children:Object(Q.jsx)("h1",{className:"project-h1",children:"Add a Project"})}),Object(Q.jsx)("label",{htmlFor:"projectName",children:"Project Name: "}),Object(Q.jsx)("input",{type:"text",id:"projectName",name:"projectName",value:te.projectName,onChange:se,required:!0}),Object(Q.jsx)("label",{htmlFor:"projectStartDate",children:"Start Date: "}),Object(Q.jsx)("input",{type:"date",id:"projectStartDate",name:"projectStartDate",value:te.projectStartDate,min:G(te.projectEndDate),max:te.projectEndDate,onChange:se,onKeyDown:function(e){return e.preventDefault()},required:!0}),Object(Q.jsx)("label",{htmlFor:"projectEndDate",children:"End Date: "}),Object(Q.jsx)("input",{type:"date",id:"projectEndDate",name:"projectEndDate",min:te.projectStartDate,max:Z(te.projectStartDate),value:te.projectEndDate,onChange:se,onKeyDown:function(e){return e.preventDefault()},required:!0}),Object(Q.jsx)("label",{htmlFor:"projectManager",children:"Project Manager: "}),Object(Q.jsx)("input",{type:"text",id:"projectManager",name:"projectManager",value:te.projectManager,onChange:se,required:!0}),Object(Q.jsxs)("label",{htmlFor:"projectBudget",className:F?"labelError":"tempclass",children:["Project Budget:"," "]}),Object(Q.jsx)("input",{type:"number",step:"any",id:"projectBudget",name:"projectBudget",defaultValue:te.projectBudget?te.projectBudget:"",onChange:se,className:F?"errorClass":"tempclass",required:!0}),F&&Object(Q.jsx)(J.a,{severity:"error",children:"Enter a positive value for amount!"}),Object(Q.jsxs)("center",{children:[Object(Q.jsx)("button",{type:"reset",onClick:function(){return ae({projectName:"",projectStartDate:"",projectEndDate:"",projectManager:"",projectBudget:0,projectMonthlyBudgets:[Array(12).fill(0)]})},children:"Reset"}),Object(Q.jsx)("button",{className:"next",onClick:function(){return Y(2)},disabled:""===te.projectName||""===te.projectStartDate||""===te.projectEndDate||""===te.projectManager||""===te.projectBudget||0===te.projectBudget||F,children:"Next"})]})]}):Object(Q.jsx)("form",{className:"form-step-2",onSubmit:function(e){e.preventDefault()},children:Object(Q.jsxs)("center",{children:[Object(Q.jsx)("h1",{children:"Remaining Budget:"}),Object(Q.jsxs)("h1",{children:["$",(new Intl.NumberFormat).format(ie)]}),Object(Q.jsx)("div",{className:"form-2",children:function(){var e=te.projectStartDate,t=te.projectEndDate,a=new Date(e),r=new Date(t),c=a.getMonth(),o=r.getMonth(),s=a.getFullYear();return(o-c>0?Object(n.a)(K.slice(c,o+1)):o===c&&s===r.getFullYear()?[K[c]]:[].concat(Object(n.a)(K.slice(c,12)),Object(n.a)(K.slice(0,o+1)))).map((function(e){var t=e+" '"+s.toString().substr(-2);return"Dec"===e&&(s+=1),t}))}().map((function(e,t){return Object(Q.jsxs)("div",{className:"month-inputs",children:[Object(Q.jsx)("label",{className:_[t]?"labelError2":"month-class",htmlFor:e,children:e}),Object(Q.jsx)("input",{className:_[t]?"errorClass2":"month-class",name:"month-input",type:"text",value:z[L[e.slice(0,3)]]?Math.abs(z[L[e.slice(0,3)]]):0,min:"0",onKeyDown:function(e){"Enter"===e.key&&e.preventDefault()},onChange:function(a){if(""===a.target.value&&(a.target.value=0),a.target.validity.badInput||!/^[0-9]\d*(\.\d+)?$/.test(a.target.value)){var n=_;n[t]=!0,A(n)}else{var r=_;r[t]=!1,A(r)}var o=Object(c.a)({},z);o[L[e.slice(0,3)]]=parseFloat(a.target.value?a.target.value:0),U(o),ae((function(){return Object(c.a)(Object(c.a)({},te),{},{projectMonthlyBudgets:o})}))}})]},t)}))}),Object(Q.jsx)("button",{className:"back",onClick:function(){return Y(1)},children:"Back"}),Object(Q.jsx)("button",{type:"submit",onClick:function(e){if(e.preventDefault(),!F){$.a.post("https://project-budget-tracker.herokuapp.com/api/projects/modify-project/",te).catch((function(e){console.log(e)})),C(D-1),oe()}},id:"projectSubmit",disabled:!_.every((function(e){return!1===e}))||0!==ie,children:"Submit"})]})}),Object(Q.jsx)("button",{onClick:oe,id:"closeButton",children:"\xd7"})]}),Object(Q.jsx)("center",{children:Object(Q.jsxs)("div",{id:"projectdiv",children:[Object(Q.jsx)("select",{id:"proj"===a?"hideprojectselect":"projectselect",value:f,onChange:function(e){v(e.target.value),localStorage.setItem("projectId",e.target.value)},children:Object.keys(N).map((function(e){return Object(Q.jsx)("option",{value:e,children:N[e]},e)}))}),Object(Q.jsx)("div",{className:"multi-button",children:Object(Q.jsx)("button",{id:"projectbutton",className:"cut",onClick:function(){p(!0)},children:"+ Add Project"})})]})}),Object(Q.jsx)(xe.Provider,{value:{settab:o,projectId:f,counter:D,setCounter:C,setProjectId:v},children:Object(Q.jsxs)(m.c,{children:[Object(Q.jsx)(m.a,{exact:!0,path:"/",component:Oe}),Object(Q.jsx)(m.a,{exact:!0,path:"/transactions",component:ce}),Object(Q.jsx)(m.a,{exact:!0,path:"/reports",component:me}),Object(Q.jsx)(m.a,{exact:!0,path:"/projects",component:de})]})})]})};b.a.render(Object(Q.jsx)(ge,{}),document.getElementById("root"))},95:function(e,t,a){}},[[320,1,2]]]);
//# sourceMappingURL=main.16d08ab1.chunk.js.map