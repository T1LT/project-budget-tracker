(this["webpackJsonpproject-budget-tracker"]=this["webpackJsonpproject-budget-tracker"]||[]).push([[0],{134:function(e,t,a){},315:function(e,t,a){},316:function(e,t,a){},317:function(e,t,a){},320:function(e,t,a){"use strict";a.r(t),a.d(t,"tabContext",(function(){return me}));var n=a(16),c=a(4),r=a(17),s=a(33),o=a.n(s),i=a(48),l=a(6),j=a(0),d=a.n(j),u=a(40),b=a.n(u),p=a(49),h=a.n(p),O=a(57),x=a(20),m=a(370),g=a(371),f=a(372),v=a(367),y=a(373),S=a(361),D=a(368),C=a(374),w=a(375),N=a(369),E=a(376),M=a(377),B=a(378),F=a(364),I=a(162),T=a.n(I),k=a(84),P=a.n(k),_=a(85),A=a.n(_),R=a(161),q=a.n(R),V=a(360),Y=a(21),$=a.n(Y),J=(a(134),a(95),a(366)),K=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],L={Jan:"january",Feb:"february",Mar:"march",Apr:"april",May:"may",Jun:"june",Jul:"july",Aug:"august",Sep:"september",Oct:"october",Nov:"november",Dec:"december"},H=new Date,W=String(H.getDate()).padStart(2,"0"),z=String(H.getMonth()+1).padStart(2,"0"),U=H.getFullYear()+"-"+z+"-"+W,Z=function(e){var t=new Date(e);t.setFullYear(t.getFullYear()+1);var a=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()).padStart(2,"0");return t.getFullYear()+"-"+n+"-"+a},G=function(e){var t=new Date(e);t.setFullYear(t.getFullYear()-1);var a=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+2).padStart(2,"0");return t.getFullYear()+"-"+n+"-"+a},Q=a(1),X=function(e){var t=e.isOpen,a=e.closeModal,n=e.transactionType,s=e.setTransactionType,o=e.formTransactionData,i=e.setFormTransactionData,l=e.handleTransaction,j=e.showError,d=e.setShowError,u=e.caller,b=e.projectStartDate,p=e.projectEndDate,O=function(e){"transaction-amount"===e.target.name?"-"===e.target.value[0]?d(!0):(d(!1),i(Object(r.a)(Object(r.a)({},o),{},Object(c.a)({},e.target.name,e.target.value)))):"transaction-date"===e.target.name?i(Object(r.a)(Object(r.a)({},o),{},{"transaction-date":e.target.value})):i(Object(r.a)(Object(r.a)({},o),{},Object(c.a)({},e.target.name,e.target.value)))};return Object(Q.jsxs)(h.a,{isOpen:t,onRequestClose:a,closeTimeoutMS:200,className:"Modal",overlayClassName:"Overlay",ariaHideApp:!1,children:[Object(Q.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(Q.jsx)("center",{children:Object(Q.jsxs)("h1",{className:"project-h1",children:[u," a Transaction"]})}),Object(Q.jsx)("label",{htmlFor:"transaction-name",children:"Transaction Name: "}),Object(Q.jsx)("input",{type:"text",id:"transaction-name",name:"transaction-name",defaultValue:"Edit"===u?o["transaction-name"]:"",onChange:O,required:!0}),Object(Q.jsx)("label",{htmlFor:"transaction-date",children:"Transaction Date: "}),Object(Q.jsx)("input",{type:"date",id:"transaction-date",name:"transaction-date",defaultValue:"Edit"===u?o["transaction-date"]:U,min:b,max:U<p?U:p,onChange:O,onKeyDown:function(e){return e.preventDefault()},required:!0}),Object(Q.jsx)("label",{htmlFor:"transaction-type",children:"Type of Transaction: "}),Object(Q.jsxs)("select",{type:"text",id:"transaction-type",name:"transaction-type",value:"Edit"===u?o["transaction-type"]:n,onChange:function(e){s(e.target.value),O(e)},required:!0,children:[Object(Q.jsx)("option",{value:"Architect",children:"Architect"}),Object(Q.jsx)("option",{value:"DBA",children:"DBA"}),Object(Q.jsx)("option",{value:"Technical Lead",children:"Technical Lead"}),Object(Q.jsx)("option",{value:"Developer",children:"Developer"}),Object(Q.jsx)("option",{value:"Business Analyst",children:"Business Analyst"}),Object(Q.jsx)("option",{value:"Tester",children:"Tester"}),Object(Q.jsx)("option",{value:"Networking and Security",children:"Networking and Security"}),Object(Q.jsx)("option",{value:"Travel Expenses",children:"Travel Expenses"}),Object(Q.jsx)("option",{value:"Hardware Costs",children:"Hardware Costs"}),Object(Q.jsx)("option",{value:"Software Costs",children:"Software Costs"}),Object(Q.jsx)("option",{value:"Stationery",children:"Stationery"}),Object(Q.jsx)("option",{value:"Training",children:"Training"}),Object(Q.jsx)("option",{value:"Miscellaneous",children:"Miscellaneous"})]}),Object(Q.jsx)("label",{htmlFor:"transaction-amount",className:j?"labelError":"tempclass",children:"Transaction Amount:"}),Object(Q.jsx)("input",{type:"number",step:"any",id:"transaction-amount",name:"transaction-amount",defaultValue:"Edit"===u?Number.parseFloat(o["transaction-amount"]):"",onChange:O,className:j?"errorClass":"tempclass",required:!0}),j&&Object(Q.jsx)(J.a,{severity:"error",children:"Enter a positive value for amount!"}),Object(Q.jsxs)("center",{children:[Object(Q.jsx)("button",{type:"reset",value:"Reset",children:"Reset"}),Object(Q.jsx)("button",{type:"submit",onClick:l,id:"transaction-submit",disabled:j||"Add"===u&&(0===o["transaction-amount"]||""===o["transaction-name"]),children:"Submit"})]})]}),Object(Q.jsx)("button",{onClick:a,id:"closeButton",children:"\xd7"})]})};function ee(e,t,a){return"amount"===a?parseInt(t[a])<parseInt(e[a])?-1:parseInt(t[a])>parseInt(e[a])?1:0:t[a]<e[a]?-1:t[a]>e[a]?1:0}function te(e,t){return"desc"===e?function(e,a){return ee(e,a,t)}:function(e,a){return-ee(e,a,t)}}function ae(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}var ne=[{id:"serial",numeric:!1,disablePadding:!0,label:"S.No."},{id:"name",numeric:!0,disablePadding:!1,label:"Transaction Name"},{id:"amount",numeric:!0,disablePadding:!1,label:"Transaction Amount"},{id:"date",numeric:!0,disablePadding:!1,label:"Transaction Date"},{id:"type",numeric:!0,disablePadding:!1,label:"Transaction Type"}];function ce(e){var t=e.order,a=e.orderBy,n=e.onRequestSort;return Object(Q.jsx)(m.a,{children:Object(Q.jsxs)(g.a,{children:[ne.map((function(e){return"serial"!==e.id?Object(Q.jsx)(f.a,{align:e.numeric?"center":"left",sortDirection:a===e.id&&t,children:Object(Q.jsxs)(v.a,{active:a===e.id,direction:a===e.id?t:"asc",onClick:(c=e.id,function(e){n(e,c)}),children:[e.label,a===e.id?Object(Q.jsx)(y.a,{component:"span",sx:V.a,children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id):Object(Q.jsx)(f.a,{sx:{fontFamily:"Manrope"},children:e.label},e.id);var c})),Object(Q.jsx)(f.a,{sx:{fontFamily:"Manrope",paddingLeft:3.5},children:"Options"})]})})}var re=function(){var e=Object(j.useContext)(me),t=e.settab,a=e.projectId,n=e.counter,c=Object(j.useState)(0),s=Object(l.a)(c,2),d=s[0],u=s[1],b=Object(j.useState)("asc"),p=Object(l.a)(b,2),h=p[0],O=p[1],x=Object(j.useState)("serial"),m=Object(l.a)(x,2),v=m[0],I=m[1],k=Object(j.useState)(0),_=Object(l.a)(k,2),R=_[0],V=_[1],Y=Object(j.useState)(5),J=Object(l.a)(Y,2),K=J[0],L=J[1],H=Object(j.useState)([]),W=Object(l.a)(H,2),z=W[0],Z=W[1],G=Object(j.useState)(),ee=Object(l.a)(G,2),ne=ee[0],re=ee[1],se=Object(j.useState)(),oe=Object(l.a)(se,2),ie=oe[0],le=oe[1],je=Object(j.useState)(null),de=Object(l.a)(je,2),ue=de[0],be=de[1],pe=Object(j.useState)("Architect"),he=Object(l.a)(pe,2),Oe=he[0],xe=he[1],ge=Object(j.useState)({"transaction-name":"","transaction-type":"Architect","transaction-amount":0,"transaction-date":"",project_id:a}),fe=Object(l.a)(ge,2),ve=fe[0],ye=fe[1],Se=Object(j.useState)(!1),De=Object(l.a)(Se,2),Ce=De[0],we=De[1],Ne=Object(j.useState)(!1),Ee=Object(l.a)(Ne,2),Me=Ee[0],Be=Ee[1];Object(j.useEffect)((function(){Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.get("http://localhost:8000/api/project/".concat(a,"/transactions"));case 2:t=e.sent,Z(t.data.transactions),re(t.data.projectStartDate),le(t.data.projectEndDate);case 6:case"end":return e.stop()}}),e)})))()}),[a,n,d]);var Fe=function(){we(!0),ye(Object(r.a)(Object(r.a)({},ve),{},{"transaction-date":U,project_id:a}))},Ie=function(){we(!1),Be(!1),ye({"transaction-name":"","transaction-type":"Architect","transaction-amount":0,"transaction-date":"",project_id:a})},Te=Object(S.a)("(max-width: 600px)"),ke=R>0?Math.max(0,(1+R)*K-z.length):0;return Object(j.useEffect)((function(){t("tran")}),[t]),Object(Q.jsx)(y.a,{sx:{width:"100%",marginTop:"2.5%",display:"flex",justifyContent:"center"},children:Object(Q.jsx)(y.a,{sx:{width:"80%"},children:Object(Q.jsxs)(D.a,{sx:{width:"100%",mb:2},children:[Object(Q.jsxs)(C.a,{sx:{pl:{sm:2},pr:{xs:1,sm:1}},children:[Object(Q.jsx)(w.a,{sx:{flex:"1 1 100%"},variant:"h6",id:"tableTitle",component:"div",children:"Transaction Table"}),Object(Q.jsx)(X,{isOpen:Ce,closeModal:Ie,transactionType:Oe,setTransactionType:xe,formTransactionData:ve,setFormTransactionData:ye,handleTransaction:function(e){if(e.preventDefault(),!Me){var t="http://localhost:8000/api/projects/add-transaction/";"Edit"===ue?$.a.put(t,ve).catch((function(e){console.log(e)})):$.a.post(t,ve).catch((function(e){console.log(e)})),u(d+1),Ie()}},showError:Me,setShowError:Be,caller:ue,projectStartDate:ne,projectEndDate:ie}),Object(Q.jsxs)(N.a,{sx:{borderRadius:0,color:"black"},onClick:function(){$.a.get("http://localhost:8000/api/project/".concat(a,"/download_csv/"),{responseType:"blob"}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download","".concat(a,"_transactions.csv")),document.body.appendChild(n),n.click()})).catch((function(e){console.log(e)}))},children:[Object(Q.jsx)(q.a,{sx:{opacity:"70%"}}),!Te&&Object(Q.jsx)(w.a,{children:"Export CSV"})]}),Object(Q.jsxs)(N.a,{onClick:function(){Fe(),be("Add")},sx:{borderRadius:0,color:"black"},children:[Object(Q.jsx)(T.a,{sx:{opacity:"70%"}}),!Te&&Object(Q.jsx)(w.a,{children:"Add Transaction"})]})]}),Object(Q.jsx)(E.a,{children:Object(Q.jsxs)(M.a,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"medium",children:[Object(Q.jsx)(ce,{order:h,orderBy:v,onRequestSort:function(e,t){O(v===t&&"asc"===h?"desc":"asc"),I(t)}}),Object(Q.jsxs)(B.a,{children:[ae(z,te(h,v)).slice(R*K,R*K+K).map((function(e,t){var n=new Date(e.date),c=n.getMonth()+1,r=(n.getDate()>=10?n.getDate():"0"+n.getDate())+"/"+(c>=10?c:"0"+c)+"/"+n.getFullYear();return Object(Q.jsxs)(g.a,{children:[Object(Q.jsx)(f.a,{children:R*K+t+1}),Object(Q.jsx)(f.a,{align:"center",sx:{paddingRight:5},children:e.name}),Object(Q.jsxs)(f.a,{align:"center",sx:{paddingRight:5},children:["$",(new Intl.NumberFormat).format(e.amount)]}),Object(Q.jsx)(f.a,{align:"center",sx:{paddingRight:5},children:r}),Object(Q.jsx)(f.a,{align:"center",sx:{paddingRight:5},children:e.type}),Object(Q.jsxs)(f.a,{children:[Object(Q.jsx)(N.a,{onClick:function(){Fe(),be("Edit"),ye({"transaction-id":e.id,"transaction-name":e.name,"transaction-type":e.type,"transaction-amount":e.amount,"transaction-date":e.date,project_id:a})},children:Object(Q.jsx)(P.a,{sx:{opacity:"70%"}})}),Object(Q.jsx)(N.a,{onClick:function(){window.confirm("Are you sure you want to delete?")&&($.a.delete("http://localhost:8000/api/projects/add-transaction/",{data:{"transaction-id":e.id}}).catch((function(){console.error()})),u(d+1))},children:Object(Q.jsx)(A.a,{sx:{opacity:"70%"}})})]})]},t)})),ke>0&&Object(Q.jsx)(g.a,{style:{height:53*ke},children:Object(Q.jsx)(f.a,{colSpan:6})})]})]})}),Object(Q.jsx)(F.a,{rowsPerPageOptions:[5,10,25],component:"div",count:z.length,rowsPerPage:K,page:R,onPageChange:function(e,t){V(t)},onRowsPerPageChange:function(e){L(parseInt(e.target.value,10)),V(0)}})]})})})};function se(e,t,a){return"budget"===a?parseInt(t[a])<parseInt(e[a])?-1:parseInt(t[a])>parseInt(e[a])?1:0:t[a]<e[a]?-1:t[a]>e[a]?1:0}function oe(e,t){return"desc"===e?function(e,a){return se(e,a,t)}:function(e,a){return-se(e,a,t)}}function ie(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}var le=[{id:"id",numeric:!1,disablePadding:!0,label:"S.No."},{id:"name",numeric:!0,disablePadding:!1,label:"Project Name"},{id:"start_date",numeric:!0,disablePadding:!1,label:"Project Start Date"},{id:"end_date",numeric:!0,disablePadding:!1,label:"Project End Date"},{id:"manager",numeric:!0,disablePadding:!1,label:"Project Manager"},{id:"budget",numeric:!0,disablePadding:!1,label:"Project Budget"}];function je(e){var t=e.order,a=e.orderBy,n=e.onRequestSort;return Object(Q.jsx)(m.a,{children:Object(Q.jsxs)(g.a,{children:[le.map((function(e){return Object(Q.jsx)(f.a,{align:e.numeric?"center":"left",sortDirection:a===e.id&&t,children:Object(Q.jsxs)(v.a,{active:a===e.id,direction:a===e.id?t:"asc",onClick:(c=e.id,function(e){n(e,c)}),children:[e.label,a===e.id?Object(Q.jsx)(y.a,{component:"span",sx:V.a,children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id);var c})),Object(Q.jsx)(f.a,{sx:{fontFamily:"Manrope",paddingLeft:3.5},children:"Options"})]})})}var de=function(){var e=Object(j.useContext)(me),t=e.settab,a=e.projectId,s=e.counter,d=e.setProjectId,u=e.setCounter,b=Object(j.useState)("asc"),p=Object(l.a)(b,2),O=p[0],x=p[1],m=Object(j.useState)("serial"),v=Object(l.a)(m,2),S=v[0],I=v[1],T=Object(j.useState)(0),k=Object(l.a)(T,2),_=k[0],R=k[1],q=Object(j.useState)(10),V=Object(l.a)(q,2),Y=V[0],H=V[1],W=Object(j.useState)([]),z=Object(l.a)(W,2),U=z[0],G=z[1],X=Object(j.useState)(!1),ee=Object(l.a)(X,2),te=ee[0],ae=ee[1],ne=Object(j.useState)(!1),ce=Object(l.a)(ne,2),re=ce[0],se=ce[1],le=Object(j.useState)({}),de=Object(l.a)(le,2),ue=de[0],be=de[1],pe=Object(j.useState)(1),he=Object(l.a)(pe,2),Oe=he[0],xe=he[1],ge=Object(j.useState)(Array(12).fill(!1)),fe=Object(l.a)(ge,2),ve=fe[0],ye=fe[1],Se=function(e){"projectBudget"!==e.target.name&&"projectStartDate"!==e.target.name&&"projectEndDate"!==e.target.name||be((function(e){return Object(r.a)(Object(r.a)({},e),{},{projectMonthlyBudgets:{}})})),"projectBudget"===e.target.name?/^[0-9]+$/.test(e.target.value)?(se(!1),be((function(t){return Object(r.a)(Object(r.a)({},t),{},Object(c.a)({},e.target.name,e.target.value))}))):se(!0):be((function(t){return Object(r.a)(Object(r.a)({},t),{},Object(c.a)({},e.target.name,e.target.value))}))},De=function(){ae(!1),se(!1),xe(1),ye(Array(12).fill(!1))},Ce=_>0?Math.max(0,(1+_)*Y-U.length):0,we=function(e){var t=new Date(e),a=t.getMonth()+1;return(t.getDate()>=10?t.getDate():"0"+t.getDate())+"/"+(a>=10?a:"0"+a)+"/"+t.getFullYear()};return Object(j.useEffect)((function(){t("proj")}),[t]),Object(j.useEffect)((function(){Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.get("http://localhost:8000/api/projects/");case 2:t=e.sent,G(t.data);case 4:case"end":return e.stop()}}),e)})))()}),[a,s]),Object(Q.jsx)(y.a,{sx:{width:"100%",marginTop:"2.5%",display:"flex",justifyContent:"center"},children:Object(Q.jsx)(y.a,{sx:{width:"80%"},children:Object(Q.jsxs)(D.a,{sx:{width:"100%",mb:2},children:[Object(Q.jsx)(C.a,{sx:{pl:{sm:2},pr:{xs:1,sm:1}},children:Object(Q.jsx)(w.a,{sx:{flex:"1 1 100%"},variant:"h6",id:"tableTitle",component:"div",children:"Projects Table"})}),Object(Q.jsxs)(h.a,{isOpen:te,onRequestClose:De,closeTimeoutMS:200,className:"Modal",overlayClassName:"Overlay",ariaHideApp:!1,children:[1===Oe?Object(Q.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(Q.jsx)("center",{children:Object(Q.jsx)("h1",{children:"Edit Project"})}),Object(Q.jsx)("label",{htmlFor:"projectName",children:"Project Name: "}),Object(Q.jsx)("input",{type:"text",id:"projectName",name:"projectName",defaultValue:ue.projectName,onChange:Se,required:!0}),Object(Q.jsx)("label",{htmlFor:"projectStartDate",children:"Start Date: "}),Object(Q.jsx)("input",{type:"date",id:"projectStartDate",name:"projectStartDate",defaultValue:ue.projectStartDate,onChange:Se,onKeyDown:function(e){return e.preventDefault()},required:!0}),Object(Q.jsx)("label",{htmlFor:"projectEndDate",children:"End Date: "}),Object(Q.jsx)("input",{type:"date",id:"projectEndDate",name:"projectEndDate",min:ue.projectStartDate,max:Z(ue.projectStartDate),defaultValue:ue.projectEndDate,onChange:Se,onKeyDown:function(e){return e.preventDefault()},required:!0}),Object(Q.jsx)("label",{htmlFor:"projectManager",children:"Project Manager: "}),Object(Q.jsx)("input",{type:"text",id:"projectManager",name:"projectManager",defaultValue:ue.projectManager,onChange:Se,required:!0}),Object(Q.jsxs)("label",{htmlFor:"projectBudget",className:re?"labelError":"tempclass",children:["Project Budget:"," "]}),Object(Q.jsx)("input",{type:"number",step:"any",id:"projectBudget",name:"projectBudget",defaultValue:Number.parseFloat(ue.projectBudget),onChange:Se,className:re?"errorClass":"tempclass",required:!0}),re&&Object(Q.jsx)(J.a,{severity:"error",children:"Enter a positive value for amount!"}),Object(Q.jsx)("center",{children:Object(Q.jsx)("button",{className:"next",onClick:function(){return xe(2)},disabled:re||""===ue.projectBudget||isNaN(ue.projectBudget),children:"Next"})})]}):Object(Q.jsx)("form",{className:"form-step-2",onSubmit:function(e){e.preventDefault()},children:Object(Q.jsxs)("center",{children:[Object(Q.jsx)("h1",{children:"Remaining Budget:"}),Object(Q.jsxs)("h1",{children:["$",(new Intl.NumberFormat).format(Number.parseFloat(ue.projectBudget)-Object.values(ue.projectMonthlyBudgets).reduce((function(e,t){return(e||0)+(t||0)}),0))]}),Object(Q.jsx)("div",{className:"form-2",children:function(){var e=ue.projectStartDate,t=ue.projectEndDate,a=new Date(e),c=new Date(t),r=a.getMonth(),s=c.getMonth(),o=a.getFullYear();return(s-r>0?Object(n.a)(K.slice(r,s+1)):s===r&&o===c.getFullYear()?[K[r]]:[].concat(Object(n.a)(K.slice(r,12)),Object(n.a)(K.slice(0,s+1)))).map((function(e){var t=e+" '"+o.toString().substr(-2);return"Dec"===e&&(o+=1),t}))}().map((function(e,t){return Object(Q.jsxs)("div",{className:"month-inputs",children:[Object(Q.jsx)("label",{className:ve[t]?"labelError2":"month-class",htmlFor:e,children:e}),Object(Q.jsx)("input",{className:ve[t]?"errorClass2":"month-class",name:"month-input",type:"text",value:ue.projectMonthlyBudgets[L[e.slice(0,3)]]?Math.abs(ue.projectMonthlyBudgets[L[e.slice(0,3)]]):0,min:"0",onKeyDown:function(e){"Enter"===e.key&&e.preventDefault()},onChange:function(a){if(""===a.target.value&&(a.target.value=0),a.target.validity.badInput||!/^[0-9]\d*(\.\d+)?$/.test(a.target.value)){var n=ve;n[t]=!0,ye(n)}else{var c=ve;c[t]=!1,ye(c)}var s=Object(r.a)({},ue.projectMonthlyBudgets);s[L[e.slice(0,3)]]=parseFloat(a.target.value?a.target.value:0),be((function(){return Object(r.a)(Object(r.a)({},ue),{},{projectMonthlyBudgets:s})}))}})]},t)}))}),Object(Q.jsx)("button",{className:"back",onClick:function(){return xe(1)},children:"Back"}),Object(Q.jsx)("button",{type:"submit",onClick:function(e){if(e.preventDefault(),!re){$.a.put("http://localhost:8000/api/projects/modify-project/",ue).catch((function(e){console.log(e)})),u(s+1),De()}},id:"projectSubmit",disabled:!ve.every((function(e){return!1===e}))||Number.parseFloat(ue.projectBudget)-Object.values(ue.projectMonthlyBudgets).reduce((function(e,t){return(e||0)+(t||0)}),0)!==0,children:"Submit"})]})}),Object(Q.jsx)("button",{onClick:De,id:"closeButton",children:"\xd7"})]}),Object(Q.jsx)(E.a,{children:Object(Q.jsxs)(M.a,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"medium",children:[Object(Q.jsx)(je,{order:O,orderBy:S,onRequestSort:function(e,t){x(S===t&&"asc"===O?"desc":"asc"),I(t)}}),Object(Q.jsxs)(B.a,{children:[ie(U,oe(O,S)).slice(_*Y,_*Y+Y).map((function(e,t){return Object(Q.jsxs)(g.a,{children:[Object(Q.jsx)(f.a,{component:"th",scope:"row",children:_*Y+t+1}),Object(Q.jsx)(f.a,{align:"center",sx:{paddingRight:5},children:e.name}),Object(Q.jsx)(f.a,{align:"center",sx:{paddingRight:5},children:we(e.start_date)}),Object(Q.jsx)(f.a,{align:"center",sx:{paddingRight:5},children:we(e.end_date)}),Object(Q.jsx)(f.a,{align:"center",sx:{paddingRight:5},children:e.manager}),Object(Q.jsxs)(f.a,{align:"center",sx:{paddingRight:5},children:["$",(new Intl.NumberFormat).format(e.budget)]}),Object(Q.jsxs)(f.a,{children:[Object(Q.jsx)(N.a,{onClick:function(){ae(!0),be(Object(r.a)(Object(r.a)({},ue),{},{project_id:a})),be({id:e.id,projectName:e.name,projectStartDate:e.start_date,projectEndDate:e.end_date,projectManager:e.manager,projectBudget:e.budget,projectMonthlyBudgets:e.monthly_budget})},children:Object(Q.jsx)(P.a,{sx:{opacity:"70%"}})}),Object(Q.jsx)(N.a,{onClick:function(){window.confirm("Are you sure you want to delete?")&&$.a.delete("http://localhost:8000/api/projects/modify-project/",{data:{id:e.id}}).then(Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.get("http://localhost:8000/api/projects/");case 2:t=e.sent,G(t.data),d(U[0].id);case 5:case"end":return e.stop()}}),e)})))).catch((function(){console.error()}))},children:Object(Q.jsx)(A.a,{sx:{opacity:"70%"}})})]})]},t)})),Ce>0&&Object(Q.jsx)(g.a,{style:{height:53*Ce},children:Object(Q.jsx)(f.a,{colSpan:6})})]})]})}),Object(Q.jsx)(F.a,{rowsPerPageOptions:[5,10,25],component:"div",count:U.length,rowsPerPage:Y,page:_,onPageChange:function(e,t){R(t)},onRowsPerPageChange:function(e){H(parseInt(e.target.value,10)),R(0)}})]})})})},ue=a(86),be=(a(315),a(379)),pe=a(380),he=a(381),Oe=function(){var e=Object(j.useContext)(me),t=e.settab,a=e.projectId,c=Object(j.useState)({}),r=Object(l.a)(c,2),s=r[0],o=r[1],i=Object(j.useState)([]),d=Object(l.a)(i,2),u=d[0],b=d[1],p=Object(j.useState)([]),h=Object(l.a)(p,2),O=h[0],x=h[1],m=Object(j.useState)(0),g=Object(l.a)(m,2),f=g[0],v=g[1];return Object(j.useEffect)((function(){!function(){var e=[],t=[],n={expenses:{}},c="http://localhost:8000/api/project/".concat(a,"/");$.a.get(c).then((function(a){n=a.data,o(n),b([]),x([]),Object.keys(n.expenses).map((function(a){return 0!==n.expenses[a]&&(e.push(a),t.push(n.expenses[a])),null})),b(e),x(t),v(1)})).catch((function(e){console.log(e.response.status),500===e.response.status?v(2):v(0)}))}()}),[a]),Object(j.useEffect)((function(){t("dash")}),[t]),Object(Q.jsxs)(Q.Fragment,{children:[0===f&&Object(Q.jsx)("div",{style:{height:"70vh",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(Q.jsx)(be.a,{})}),1===f&&Object(Q.jsxs)("div",{id:"dash",children:[Object(Q.jsxs)("div",{id:"left",children:[Object(Q.jsx)(pe.a,{variant:"outlined",sx:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:2},children:Object(Q.jsxs)(he.a,{sx:{display:"grid",placeItems:"center"},children:[Object(Q.jsx)("h2",{id:"totaltext",children:"Total Budget"}),Object(Q.jsxs)("h1",{id:"totalamt",children:["$",(new Intl.NumberFormat).format(s.budget)]}),Object(Q.jsx)("h2",{id:"inctext",children:"Incurred Expenses"}),Object(Q.jsxs)("h1",{id:"incamt",children:["$",(new Intl.NumberFormat).format(s.incurred_expenses)]})]})}),Object(Q.jsx)(pe.a,{variant:"outlined",sx:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:2},children:Object(Q.jsxs)(he.a,{sx:{display:"grid",placeItems:"center"},children:[Object(Q.jsxs)("h1",{id:s.monthly_budget_sum-s.incurred_expenses<0?"erroramt":"cvamt",children:["$",(new Intl.NumberFormat).format(Math.round(s.monthly_budget_sum-s.incurred_expenses))]}),Object(Q.jsx)("h2",{id:"cvtext",children:"Cost Variance"})]})}),Object(Q.jsx)(pe.a,{variant:"outlined",sx:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:2},children:Object(Q.jsxs)(he.a,{sx:{display:"grid",placeItems:"center"},children:[Object(Q.jsx)("h1",{id:s.monthly_budget_sum/s.incurred_expenses<1?"erroramt":"cpiamt",children:(s.monthly_budget_sum/s.incurred_expenses).toFixed(2)}),Object(Q.jsx)("h2",{id:"cpitext",children:"Cost Performance Index"})]})}),Object(Q.jsx)(pe.a,{variant:"outlined",sx:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:2},children:Object(Q.jsxs)(he.a,{sx:{display:"grid",placeItems:"center"},children:[Object(Q.jsxs)("h1",{id:"percentamt",children:[(s.incurred_expenses/s.budget*100).toFixed(2),"%"]}),Object(Q.jsx)("h2",{id:"percenttext",children:"spent"})]})}),Object(Q.jsx)(pe.a,{variant:"outlined",sx:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:2},children:Object(Q.jsxs)(he.a,{sx:{display:"grid",placeItems:"center"},children:[Object(Q.jsxs)("h1",{id:"eacamt",children:["$",(new Intl.NumberFormat).format(Math.round(s.budget/(s.monthly_budget_sum/s.incurred_expenses)))]}),Object(Q.jsx)("h2",{id:"eactext",children:"Estimate at Completion"})]})}),Object(Q.jsx)(pe.a,{variant:"outlined",sx:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:2},children:Object(Q.jsxs)(he.a,{sx:{display:"grid",placeItems:"center"},children:[Object(Q.jsxs)("h1",{id:s.budget-s.budget/(s.monthly_budget_sum/s.incurred_expenses)<0?"erroramt":"vacamt",children:["$",(new Intl.NumberFormat).format(Math.round(s.budget-s.budget/(s.monthly_budget_sum/s.incurred_expenses)))]}),Object(Q.jsx)("h2",{id:"vactext",children:"Variance at Completion"})]})})]}),Object(Q.jsx)("div",{id:"right",children:s.incurred_expenses?Object(Q.jsx)(ue.b,{id:"donut",data:{labels:Object(n.a)(u),datasets:[{data:Object(n.a)(O),fill:!0,backgroundColor:["rgb(255, 99, 132)","rgb(54, 162, 235)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(255, 159, 64)","rgb(153, 102, 255)","rgb(201, 203, 2)"]}]}}):Object(Q.jsx)("p",{className:"no-data",children:"Add transactions to render the graph."})})]}),2===f&&Object(Q.jsx)("div",{children:Object(Q.jsx)("center",{children:Object(Q.jsx)("h1",{children:"Add a project to get started."})})})]})},xe=(a(316),function(){var e=Object(j.useState)([]),t=Object(l.a)(e,2),a=t[0],n=t[1],c=Object(j.useState)([]),r=Object(l.a)(c,2),s=r[0],o=r[1],i=Object(j.useState)([]),d=Object(l.a)(i,2),u=d[0],b=d[1],p=Object(j.useState)(!0),h=Object(l.a)(p,2),O=h[0],x=h[1],m=Object(j.useContext)(me),g=m.settab,f=m.projectId;Object(j.useEffect)((function(){g("repo"),$.a.get("http://localhost:8000/api/project/".concat(f,"/report/")).then((function(e){var t=e.data.expenses;n(t),t=e.data.monthly_budgets,o(t),t=e.data.labels,b(t),x(!1)})).catch((function(e){console.log(e)}))}),[g,f]);var v={labels:u,datasets:[{label:"Actual Cost",backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgb(255, 99, 132)",data:a,borderWidth:1},{label:"Planned Value",backgroundColor:"rgba(54, 162, 235, 0.2)",borderColor:"rgb(54, 162, 235)",data:s,borderWidth:1}]};return Object(Q.jsx)(Q.Fragment,{children:O?Object(Q.jsx)("div",{style:{height:"70vh",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(Q.jsx)(be.a,{})}):Object(Q.jsx)("div",{id:"outside",children:Object(Q.jsxs)("div",{id:"bar",children:[Object(Q.jsx)(ue.a,{data:v,options:{scales:{x:{beginAtZero:!0},y:{beginAtZero:!0}}}}),Object(Q.jsx)("h1",{children:"Monthly Expenses Summary"})]})})})});a(317);h.a.setAppElement("#root");var me=d.a.createContext(),ge=function(){var e=Object(j.useState)("dash"),t=Object(l.a)(e,2),a=t[0],s=t[1],d=Object(j.useState)(!1),u=Object(l.a)(d,2),b=u[0],p=u[1],m=Object(j.useState)(1),g=Object(l.a)(m,2),f=g[0],v=g[1],y=Object(j.useState)(0),S=Object(l.a)(y,2),D=S[0],C=S[1],w=Object(j.useState)({}),N=Object(l.a)(w,2),E=N[0],M=N[1],B=Object(j.useState)(!1),F=Object(l.a)(B,2),I=F[0],T=F[1],k=Object(j.useState)(Array(12).fill(!1)),P=Object(l.a)(k,2),_=P[0],A=P[1],R=Object(j.useState)(1),q=Object(l.a)(R,2),V=q[0],Y=q[1],H=Object(j.useState)({}),W=Object(l.a)(H,2),z=W[0],U=W[1],X=Object(j.useState)({projectName:"",projectStartDate:"",projectEndDate:"",projectManager:"",projectBudget:0,projectMonthlyBudgets:z}),ee=Object(l.a)(X,2),te=ee[0],ae=ee[1];Object(j.useEffect)((function(){Object(i.a)(o.a.mark((function e(){var t,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://localhost:8000/api/projects/names/",e.next=3,$.a.get("http://localhost:8000/api/projects/names/");case 3:t=e.sent,a=t.data,M(a),(n=localStorage.getItem("projectId"))&&v(n);case 8:case"end":return e.stop()}}),e)})))()}),[D]);var ne={textDecoration:"none",color:"white"},ce={textDecoration:"none",color:"white",fontWeight:"bold",borderBottom:"1px solid white",paddingBottom:"3px"},se=function(){p(!1),T(!1),A(Array(12).fill(!1)),Y(1),U({}),ae({projectName:"",projectStartDate:"",projectEndDate:"",projectManager:"",projectBudget:0,projectMonthlyBudgets:z})},oe=function(e){"projectBudget"!==e.target.name&&"projectStartDate"!==e.target.name&&"projectEndDate"!==e.target.name||(ae((function(e){return Object(r.a)(Object(r.a)({},e),{},{projectMonthlyBudgets:{}})})),U({})),"projectBudget"===e.target.name&&(/^[0-9]+$/.test(e.target.value)?T(!1):T(!0)),ae(Object(r.a)(Object(r.a)({},te),{},Object(c.a)({},e.target.name,e.target.value)))},ie=te.projectBudget-Object.values(z).reduce((function(e,t){return(e||0)+(t||0)}),0);return Object(Q.jsxs)(O.a,{children:[Object(Q.jsx)("div",{id:"navbar",children:Object(Q.jsxs)("div",{id:"navleft",children:[Object(Q.jsx)("h6",{children:"Project Budget Tracker"}),Object(Q.jsx)(O.b,{to:"/",style:"dash"===a?ce:ne,children:"Dashboard"}),Object(Q.jsx)(O.b,{to:"/transactions",style:"tran"===a?ce:ne,onClick:function(){return s("tran")},children:"Transactions"}),Object(Q.jsx)(O.b,{to:"/reports",style:"repo"===a?ce:ne,children:"Reports"}),Object(Q.jsx)(O.b,{to:"/projects",style:"proj"===a?ce:ne,onClick:function(){return s("proj")},children:"Projects"})]})}),Object(Q.jsxs)(h.a,{isOpen:b,onRequestClose:se,closeTimeoutMS:200,className:"Modal",overlayClassName:"Overlay",ariaHideApp:!1,children:[1===V?Object(Q.jsxs)("form",{className:"form-step-1",onSubmit:function(e){e.preventDefault()},children:[Object(Q.jsx)("center",{children:Object(Q.jsx)("h1",{className:"project-h1",children:"Add a Project"})}),Object(Q.jsx)("label",{htmlFor:"projectName",children:"Project Name: "}),Object(Q.jsx)("input",{type:"text",id:"projectName",name:"projectName",value:te.projectName,onChange:oe,required:!0}),Object(Q.jsx)("label",{htmlFor:"projectStartDate",children:"Start Date: "}),Object(Q.jsx)("input",{type:"date",id:"projectStartDate",name:"projectStartDate",value:te.projectStartDate,min:G(te.projectEndDate),max:te.projectEndDate,onChange:oe,onKeyDown:function(e){return e.preventDefault()},required:!0}),Object(Q.jsx)("label",{htmlFor:"projectEndDate",children:"End Date: "}),Object(Q.jsx)("input",{type:"date",id:"projectEndDate",name:"projectEndDate",min:te.projectStartDate,max:Z(te.projectStartDate),value:te.projectEndDate,onChange:oe,onKeyDown:function(e){return e.preventDefault()},required:!0}),Object(Q.jsx)("label",{htmlFor:"projectManager",children:"Project Manager: "}),Object(Q.jsx)("input",{type:"text",id:"projectManager",name:"projectManager",value:te.projectManager,onChange:oe,required:!0}),Object(Q.jsxs)("label",{htmlFor:"projectBudget",className:I?"labelError":"tempclass",children:["Project Budget:"," "]}),Object(Q.jsx)("input",{type:"number",step:"any",id:"projectBudget",name:"projectBudget",defaultValue:te.projectBudget?te.projectBudget:"",onChange:oe,className:I?"errorClass":"tempclass",required:!0}),I&&Object(Q.jsx)(J.a,{severity:"error",children:"Enter a positive value for amount!"}),Object(Q.jsxs)("center",{children:[Object(Q.jsx)("button",{type:"reset",onClick:function(){return ae({projectName:"",projectStartDate:"",projectEndDate:"",projectManager:"",projectBudget:0,projectMonthlyBudgets:[Array(12).fill(0)]})},children:"Reset"}),Object(Q.jsx)("button",{className:"next",onClick:function(){return Y(2)},disabled:""===te.projectName||""===te.projectStartDate||""===te.projectEndDate||""===te.projectManager||""===te.projectBudget||0===te.projectBudget||I,children:"Next"})]})]}):Object(Q.jsx)("form",{className:"form-step-2",onSubmit:function(e){e.preventDefault()},children:Object(Q.jsxs)("center",{children:[Object(Q.jsx)("h1",{children:"Remaining Budget:"}),Object(Q.jsxs)("h1",{children:["$",(new Intl.NumberFormat).format(ie)]}),Object(Q.jsx)("div",{className:"form-2",children:function(){var e=te.projectStartDate,t=te.projectEndDate,a=new Date(e),c=new Date(t),r=a.getMonth(),s=c.getMonth(),o=a.getFullYear();return(s-r>0?Object(n.a)(K.slice(r,s+1)):s===r&&o===c.getFullYear()?[K[r]]:[].concat(Object(n.a)(K.slice(r,12)),Object(n.a)(K.slice(0,s+1)))).map((function(e){var t=e+" '"+o.toString().substr(-2);return"Dec"===e&&(o+=1),t}))}().map((function(e,t){return Object(Q.jsxs)("div",{className:"month-inputs",children:[Object(Q.jsx)("label",{className:_[t]?"labelError2":"month-class",htmlFor:e,children:e}),Object(Q.jsx)("input",{className:_[t]?"errorClass2":"month-class",name:"month-input",type:"text",value:z[L[e.slice(0,3)]]?Math.abs(z[L[e.slice(0,3)]]):0,min:"0",onKeyDown:function(e){"Enter"===e.key&&e.preventDefault()},onChange:function(a){if(""===a.target.value&&(a.target.value=0),a.target.validity.badInput||!/^[0-9]\d*(\.\d+)?$/.test(a.target.value)){var n=_;n[t]=!0,A(n)}else{var c=_;c[t]=!1,A(c)}var s=Object(r.a)({},z);s[L[e.slice(0,3)]]=parseFloat(a.target.value?a.target.value:0),U(s),ae((function(){return Object(r.a)(Object(r.a)({},te),{},{projectMonthlyBudgets:s})}))}})]},t)}))}),Object(Q.jsx)("button",{className:"back",onClick:function(){return Y(1)},children:"Back"}),Object(Q.jsx)("button",{type:"submit",onClick:function(e){if(e.preventDefault(),!I){$.a.post("http://localhost:8000/api/projects/modify-project/",te).catch((function(e){console.log(e)})),C(D-1),se()}},id:"projectSubmit",disabled:!_.every((function(e){return!1===e}))||0!==ie,children:"Submit"})]})}),Object(Q.jsx)("button",{onClick:se,id:"closeButton",children:"\xd7"})]}),Object(Q.jsx)("center",{children:Object(Q.jsxs)("div",{id:"projectdiv",children:[Object(Q.jsx)("select",{id:"proj"===a?"hideprojectselect":"projectselect",value:f,onChange:function(e){v(e.target.value),localStorage.setItem("projectId",e.target.value)},children:Object.keys(E).map((function(e){return Object(Q.jsx)("option",{value:e,children:E[e]},e)}))}),Object(Q.jsx)("div",{className:"multi-button",children:Object(Q.jsx)("button",{id:"projectbutton",className:"cut",onClick:function(){p(!0)},children:"+ Add Project"})})]})}),Object(Q.jsx)(me.Provider,{value:{settab:s,projectId:f,counter:D,setCounter:C,setProjectId:v},children:Object(Q.jsxs)(x.c,{children:[Object(Q.jsx)(x.a,{exact:!0,path:"/",component:Oe}),Object(Q.jsx)(x.a,{exact:!0,path:"/transactions",component:re}),Object(Q.jsx)(x.a,{exact:!0,path:"/reports",component:xe}),Object(Q.jsx)(x.a,{exact:!0,path:"/projects",component:de})]})})]})};b.a.render(Object(Q.jsx)(ge,{}),document.getElementById("root"))},95:function(e,t,a){}},[[320,1,2]]]);
//# sourceMappingURL=main.ae54bd67.chunk.js.map